<html>
    <head>
        <title>Encryptid</title>
        <link rel="icon" href="./images/logo.png"/>
        <link rel="stylesheet" href="materialize.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="style.css"/>
        <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase.js"></script>
        <script type="text/javascript" src="script.js"></script>
    </head>
    <body>
        <div class="logintab">
            <table class="logintable" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td>
                        <img src="images/loginmin.png" class="loginflatimage"/>
                    </td>
                    <td>
                        <span class="heading productbold">Encryptid</span><br><br>
                        <div style="width: 70%;margin-left: auto;margin-right: auto;">
                            <div class="input-field">
                                <input id="email" type="email" class="validate">
                                <label for="email">Email Address</label>
                            </div>
                            <div class="input-field">
                                <input id="password" type="password" class="validate">
                                <label for="password">Password</label>
                            </div>
                        </div>
                        <a class="waves-effect waves-light btn loginbtn" id="loginbuttonanchor">LOG-IN</a>
                    </td>
                </tr>
            </table>
        </div>
        <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase-firestore.js"></script>
        <script>
        var config = {
            apiKey: "AIzaSyD5boySKn6E0kkI3hWkVUp8salQrg59HSg",
            authDomain: "encryptid-9a31c.firebaseapp.com",
            databaseURL: "https://encryptid-9a31c.firebaseio.com",
            projectId: "encryptid-9a31c",
            storageBucket: "encryptid-9a31c.appspot.com",
            messagingSenderId: "446077629879"
          };
          firebase.initializeApp(config);
            document.getElementById("loginbuttonanchor").addEventListener("click",signin);
            
            function signin(){
                var email = document.getElementById("email").value;
                var password = document.getElementById("password").value;
                firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
                    // Handle Errors here.
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    console.log(errorMessage);
                    M.toast({html: errorMessage, classes: 'rounded', displayLength: '2000'});
                });
                firebase.auth().onAuthStateChanged(function(user) {
                    if (user) {
                        console.log(user.uid);
                    } else {
                        console.log("No user signed in!");
                    }
                });
            }
        </script>
    </body>
</html>